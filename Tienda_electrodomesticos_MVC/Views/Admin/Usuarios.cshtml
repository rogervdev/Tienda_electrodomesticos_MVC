@model List<Tienda_electrodomesticos_MVC.Models.Usuario>

@{
    ViewData["Title"] = "Usuarios";
}

<section>
    <div class="container-fluid px-5">
        <div class="card shadow-sm rounded-4 m-5">

            <!-- Header -->
            <div class="card-header bg-primary text-white text-center py-3 rounded-top">
                <h4 class="mb-0">Usuarios</h4>
            </div>

            <!-- Body -->
            <div class="card-body p-3">

                <!-- Botón regresar -->
                <div class="mb-3">
                    <a asp-controller="Admin" asp-action="Index" class="btn btn-secondary">
                        <i class="fa-solid fa-arrow-left me-2"></i> Regresar al Panel
                    </a>
                </div>

                <!-- Tabla -->
                <div class="table-responsive">
                    <table class="table table-bordered table-striped align-middle mb-0">
                        <thead class="table-light text-center">
                            <tr>
                                <th>#</th>
                                <th>Imagen</th>
                                <th>Nombre</th>
                                <th>Apellido</th>
                                <th>Correo</th>
                                <th>Estado</th>
                                <th>Acción</th>
                            </tr>
                        </thead>
                        <tbody>
                            @if (Model != null && Model.Any())
                            {
                                var count = 1;
                                foreach (var u in Model)
                                {
                                    <tr>
                                        <td class="text-center">@count</td>

                                        <td class="text-center">
                                            <img src="~/img/profile_img/@(u.ProfileImage ?? "default.png")"
                                                 class="rounded-circle border"
                                                 style="width:50px;height:50px;object-fit:cover"
                                                 alt="Perfil" />
                                        </td>

                                        <td class="text-center">@u.Nombre</td>
                                        <td class="text-center">@u.Apellido</td>
                                        <td class="text-center">@u.Email</td>

                                        <td class="text-center">
                                            @if (u.IsEnable)
                                            {
                                                <span class="badge bg-success">Activo</span>
                                            }
                                            else
                                            {
                                                <span class="badge bg-danger">Inactivo</span>
                                            }
                                        </td>

                                        <td class="text-center">
                                            <div class="d-flex justify-content-center gap-2">

                                                <!-- ACTIVAR -->
                                                <form asp-controller="Admin"
                                                      asp-action="ActualizarEstadoUsuario"
                                                      method="post">
                                                    <input type="hidden" name="id" value="@u.Id" />
                                                    <input type="hidden" name="estado" value="true" />
                                                    <button type="submit"
                                                            class="btn btn-sm btn-success">
                                                        <i class="fa-solid fa-check me-1"></i> Activar
                                                    </button>
                                                </form>

                                                <!-- DESACTIVAR -->
                                                <form asp-controller="Admin"
                                                      asp-action="ActualizarEstadoUsuario"
                                                      method="post">
                                                    <input type="hidden" name="id" value="@u.Id" />
                                                    <input type="hidden" name="estado" value="false" />
                                                    <button type="submit"
                                                            class="btn btn-sm btn-danger">
                                                        <i class="fa-solid fa-ban me-1"></i> Desactivar
                                                    </button>
                                                </form>

                                            </div>
                                        </td>

                                    </tr>
                                    count++;
                                }
                            }
                            else
                            {
                                <tr>
                                    <td colspan="7" class="text-center text-muted">
                                        No hay usuarios registrados
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
</section>
